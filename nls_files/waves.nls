to wave-advancement

  ask waves
  [
    set time time + resolution

    ifelse ( precision ( distance antenna ) 1 >= scope-radius  ) ; or ( xcor >= max-pxcor  or ycor >= max-pycor ) ) ;+ 0.01 ;; dodano je + 0.01 na scope-radius zato sto se dogadalo da se ne detektira objekt koji je od antene
    [ die ]                                                            ;; udaljen za tocno scope-radius ;; izbaceni uvjet -> and [pcolor] of patch-ahead 1 != black)
    [
     jump resolution


     if ( not bounced? and
       ( any? patches with [pcolor != black and distance myself < 0.1] or [pcolor] of patch-here != black )
        or ( [ pxcor ] of patch-here >= max-pxcor or [ pycor ] of patch-here >= max-pycor ) or ( any? cars with [distance myself < 0.1] ) )
        
     [ wave-bounce ]

    ]
  ]

end